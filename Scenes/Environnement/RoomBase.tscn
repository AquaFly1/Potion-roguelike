[gd_scene load_steps=27 format=4 uid="uid://cjuyi2adb48lg"]

[ext_resource type="Script" uid="uid://cyiwi38ri2m76" path="res://Scripts/environment/dungeon.gd" id="1_g2p7x"]
[ext_resource type="PackedScene" uid="uid://cxuteeu2gi31u" path="res://Scenes/Entities/player/player.tscn" id="1_ko3d7"]
[ext_resource type="PackedScene" uid="uid://dfrud3pja2p47" path="res://Scenes/Environnement/interaction_area.tscn" id="3_dutty"]
[ext_resource type="PackedScene" uid="uid://dm3gesrklr032" path="res://Scenes/interactions/2_goblins.tscn" id="4_u4kg2"]
[ext_resource type="PackedScene" uid="uid://daadyt14cqlty" path="res://Scenes/interactions/3_goblins.tscn" id="5_cmu4p"]
[ext_resource type="Texture2D" uid="uid://c7jjpb7nefpbe" path="res://Graphics/Environnement/props/chest/chestBase.png" id="6_aqdgw"]
[ext_resource type="PackedScene" uid="uid://ddwh6nj7lsv5t" path="res://3DAssets/Evironnement/chest.blend" id="7_2ayg0"]
[ext_resource type="Shader" uid="uid://ddb5jlkbewntb" path="res://psx.gdshader" id="7_cbaah"]
[ext_resource type="Shader" uid="uid://drcfuw3nx40i0" path="res://Graphics/Shaders/3DOutline.gdshader" id="8_4v86v"]
[ext_resource type="Texture2D" uid="uid://b5w4h7sx06uge" path="res://Graphics/Sprites/goblion.aseprite" id="9_4v86v"]
[ext_resource type="Texture2D" uid="uid://0xs73dtcfb0r" path="res://Graphics/Environnement/ChurchSpriteSheet.png" id="11_cbaah"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_u4kg2"]
noise_type = 4
frequency = 0.0555
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_u4kg2"]
noise = SubResource("FastNoiseLite_u4kg2")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_cmu4p"]
albedo_color = Color(0.46199998, 0.5124, 0.84, 1)
albedo_texture = SubResource("NoiseTexture2D_u4kg2")
albedo_texture_force_srgb = true
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_ko3d7"]
material = SubResource("StandardMaterial3D_cmu4p")

[sub_resource type="BoxShape3D" id="BoxShape3D_g2p7x"]
size = Vector3(2, 0.1, 2)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_pwss2"]
render_priority = 0
shader = ExtResource("7_cbaah")
shader_parameter/affine_mapping = true
shader_parameter/albedo = ExtResource("6_aqdgw")
shader_parameter/alpha_scissor = 1.0
shader_parameter/jitter = 0.25
shader_parameter/resolution = Vector2i(320, 240)

[sub_resource type="BoxMesh" id="BoxMesh_u4kg2"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ce7yl"]
render_priority = 0
shader = ExtResource("8_4v86v")
shader_parameter/sprite_texture = ExtResource("9_4v86v")
shader_parameter/line_color = Color(0, 0, 0, 1)
shader_parameter/glowSize = 1.0000000475
shader_parameter/glowDensity = 1
shader_parameter/glowRadialCoverage = 4
shader_parameter/glowAngle = 0.0
shader_parameter/glowSharpness = 0.0
shader_parameter/alphaThreshold = 0.30000001425

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_c78vh"]
resource_name = "Material.001"
albedo_texture = ExtResource("11_cbaah")
texture_filter = 2

[sub_resource type="ArrayMesh" id="ArrayMesh_x5ign"]
_surfaces = [{
"aabb": AABB(-11, 0, -5, 19, 11, 10),
"format": 34896613377,
"index_count": 261,
"index_data": PackedByteArray("AAAAAAAAAAAAAAAAAQAAAAAAAQABAAAAAgABAAEAAwACAAEABAACAAMABAAFAAIABQAFAAIABgAEAAMABgADAAcACAAGAAcAAwABAAkABwADAAkACAAHAAoACgALAAgACgAMAAsADAANAAsADAAOAA0ADwAOAAwADwAQAA4ACgAHABEABwAJABEACgARABIADwATABAAEwAUABAADwAVABMAEwAWABQAFwAUABYAGAAVAA8AEQAYABIAFQAZABMAGQAWABMAFgAaABcAGwAXABoAGQAcABYAHQAbABoAFgAeABoAFgAcAB4AHQAaAB4AHwAeABwAHwAcABkAHQAeAB8AHQAgABsAIQAfABkAFQAhABkAIgAdAB8AIQAiAB8AIwAgAB0AIgAjAB0AIwAkACAAJQAhABUAJgAkACMAJwAiACEAJQAnACEAKAAjACIAKAAmACMAJwAoACIAJgApACQAGAAlABUAGAAnACUAEgAYACUAEgAlACoAKgAlACcAGAArACcAEQArABgACQArABEAKwAoACcACQAsACsAKwAsACgAAQAsAAkAAQApACwALAAmACgALAApACYAAAApAAEAAAAmACkALQAnACgAKgAnAC0AKgAtACoAKgAtAC0ALgAoACYALgAmAAAALQAoAC4ALQAuAC0ALQAuAC4ALgAAAC4ALgAAAAAA"),
"name": "Material.001",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 47,
"vertex_data": PackedByteArray("aygAAP//AADXUAAA//8AAMlrAAD//wAAyWsAADKzAAD//wAAMrMAAP//AAD//wAA//8AAMxMAADJawAAzEwAAP//AAAAAAAA11AAADKzAADJawAAAAAAAP//0UUAAAAAyWvRRQAAAAD//y26AAAAAMlrLboAAAAA11DRRQAAAADXUC26AAAAANdQAADMTAAA11AAAAAAAABrKC26AAAAANdQ///MTAAAayjRRQAAAADkNf//zEwAANdQ////fwAA11CiCwAAAAAAAC26zEwAAOQ1//8yswAA11D//zKzAABrKP//ZmYAAGsoLbr//wAAayj//5mZAAAAAC26MrMAANdQLbr//wAAAADRRcxMAAAAANFFMrMAAGso0UX//wAA11DRRf//AABrKKILAAAAAGsoogv//wAAAACiC8xMAAAAAKILMrMAANdQogv//wAAaygAAAAAAADXUKILzEwAANdQogsyswAAAAAAAMxMAAAAAAAAMrMAAA==")
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_htoua"]
resource_name = "Church_Plane"
_surfaces = [{
"aabb": AABB(-11, 0, -5, 19, 11, 10),
"attribute_data": PackedByteArray("AAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAP////8AAP////8AAP////8AAP////8AAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAD/////AAD/////AAAAAAAA/////wAA/////wAAAAAAAP////8AAP////8="),
"format": 34896613399,
"index_count": 261,
"index_data": PackedByteArray("AAABAAIAAAADAAEABAAFAAYABAAHAAUACAAJAAoACAALAAkADAANAA4ADAAPAA0AEAARABIAEAATABEAFAAVABYAFAAXABUAGAAZABoAGAAbABkAHAAdAB4AHAAfAB0AIAAhACIAIwAkACUAIwAmACQAJwAoACkAJwAqACgAKwAsAC0AKwAuACwALwAwADEALwAyADAAMwA0ADUAMwA2ADQANwA4ADkANwA6ADgAOwA8AD0AOwA+ADwAPwBAAEEAPwBCAEAAQwBEAEUAQwBGAEQARwBIAEkARwBKAEgASwBMAE0ASwBOAEwATwBQAFEATwBSAFAAUwBUAFUAUwBWAFQAVwBYAFkAVwBaAFgAWwBcAF0AWwBeAFwAXwBgAGEAXwBiAGAAYwBkAGUAYwBmAGQAZwBoAGkAZwBqAGgAawBsAG0AawBuAGwAbwBwAHEAbwByAHAAcwB0AHUAcwB2AHQAdwB4AHkAdwB6AHgAewB8AH0AewB+AHwAfwCAAIEAfwCCAIAAgwCEAIUAgwCGAIQAhwCIAIkAhwCKAIgAiwCMAI0AiwCOAIwAjwCQAJEAkgCTAJQAlQCWAJcAmACZAJoAmACbAJkAnACdAJ4AnACfAJ0AoAChAKIAoACjAKEApAClAKYApACnAKUAqACpAKoAqACrAKkArACtAK4ArACvAK0AsACxALIA"),
"material": SubResource("StandardMaterial3D_c78vh"),
"name": "Material.001",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 179,
"vertex_data": PackedByteArray("aygAAP///z9rKAAA////P2soAAD///8/aygAAP///z9rKAAAAAD/PwAAAADMTP8/aygAAAAA/z8AAAAAzEz/PwAAAADMTP8/AAAAADKz/z8AAAAAzEz/PwAAAAAys/8/AAAAADKz/z9rKAAA////PwAAAAAys/8/aygAAP///z/XUAAAzEz/v9dQogsAAP+/11AAAAAA/7/XUKILzEz/vwAAAADMTP+/AACiCzKz/78AAAAAMrP/vwAAogvMTP+/11AAAP///7/XUKILMrP/v9dQAAAys/+/11CiC////7/XUAAA////P2soAAD///8/aygAAP///z/XUAAA////P8lrAAD///8/11AAAP/////XUAAA////P8lrAAAAAP//11AAAMxM///XUAAAAAD//8lrAADMTP//yWsAAMxM///XUAAAMrP//9dQAADMTP//yWsAADKz///JawAAMrP//9dQAAD/////11AAADKz///JawAA/////9dQogsys///ayiiC/////8AAKILMrP//9dQogv/////11CiC8xM//8AAKILMrP//wAAogvMTP//11CiCzKz///XUKILAAD//wAAogvMTP//ayiiCwAA///XUKILzEz//2soAAAAAP/fAACiC8xM/98AAAAAzEz/32soogsAAP/f11AAADKz/7/XUKILzEz/v9dQAADMTP+/11CiCzKz/78AAAAAMrP/n2soogv///+faygAAP///58AAKILMrP/n2soAAD//wCA11CiC///AIDXUAAA//8AgGsoogv//wCA11AAAAAA//9rKKILAAD//2soAAAAAP//11CiCwAA//8AANFFMrOq6WsoLbr//6rpAAAtujKzqulrKNFF//+q6Wso0UX/////11Atuv////9rKC26/////9dQ0UX/////AADRRcxMVNUAAC26MrNU1QAALbrMTFTVAADRRTKzVNXXUNFFAAD/v2soLboAAP+/11AtugAA/79rKNFFAAD/v2so0UUAAPzFAAAtusxM/MVrKC26AAD8xQAA0UXMTPzFayiiCwAA/MUAANFFzEz8xWso0UUAAPzFAACiC8xM/MXXUKILAAD/v2so0UUAAP+/11DRRQAA/79rKKILAAD/vwAAogvMTFTVAADRRTKzVNUAANFFzExU1QAAogsys1TVayiiC//////XUNFF/////2so0UX/////11CiC/////8AAKILMrOq6Wso0UX//6rpAADRRTKzqulrKKIL//+q6WsoLbr//yrn11D//zKzqunkNf//MrOz6NdQLbr//9Xnaygtuv//XeJrKP//mZld4gAALboys13i5DX//zKzXeIAAC26MrP8xWso//9mZvzFAAAtusxM/MVrKP//mZn8xQAALbrMTNmr5DX//8xM2atrKC26AADZq2so//9mZtmraygtugAA/5/XUP//zEz/n9dQLboAAP+f5DX//8xM/5/kNf//zExU1Wso//+ZmVTV5DX//zKzVNVrKP//ZmZU1ddQ//8ys///11D///9////kNf//MrP//9dQ////f6rp11D//8xMqunkNf//zEyq6eQ1///MTPzF5DX//zKz/MXXUP///3/8xclr0UUAAACA//8tugAAAID//9FFAAAAgMlrLboAAACAyWsAAAAAAID//9FFAAAAgP//AAAAAACAyWvRRQAAAIDXUNFFAAAAgMlrLboAAACAyWvRRQAAAIDXUC26AAAAgP//AAAys///yWsAAP/////JawAAMrP/////AAD///////8AAMxM///JawAAMrP//8lrAADMTP////8AADKz/////wAAAAD//8lrAADMTP//yWsAAAAA/////wAAzEz/////AAD///8///8AAP///z/JawAA////P////3////9/////f////3////9/////f////3////9/////f////3////9/////f////3////9/////f////3//fwAA/38AAP9/AAD/fwAA/3////9/////f////3////9/AAD/fwAA/38AAP9/AAD///9/////f////3////9/////f/9//7////9//3//v/9//7//f/+//3//v/9//7//f/+//3//v/9//7//f/+//3//v/9//7//f/+//3//v/9//7//f/+//3//v/9//7//f/+//3//v/9//7//f/+//3//v/9//7//f/+//3////9/////f////3////9/AAD/fwAA/38AAP9/AAD/f////3////9/////f////3////9/////f////3////9/////f////3////9///8ENQQ1BDUENQQ1BDUENQQ1/7//v/+//7//v/+//7//v6oqqiqqKqoqqiqqKqoqqir//////////////////////xz/HP8c/xz/HP8c/xz/HP8c/xz/HP8c/xz/HP8c/xz/////////////////////qiqqKqoqqiqqKqoqqiqqKv+//7//v/+//7//v/+//78ENQQ1BDUENQQ1BDUENQQ1nEMwUPpK+kpHSONMtkW0ToRyBy6EcgcuhHIHLoRyBy4AY/45AGP+OQBj/jkAY/456UupSelLqUnpS6lJ6UupSQAA/38AAP9/AAD/fwAA/3+qKlTVqipU1aoqVNWqKlTV/3//P/9//z//f/8/CWr6Sglq+koJavpK/xz9uf8c/bn/HP25/3////9/////f////3////9/////f////3////9/////f////3////9/////f////3//v/9//7//f/+//3//v/9//7//f/+//3//v/9//7//f/+//3//v/9//7//f/+/////f////3////9/")
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_x5ign")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_cbaah"]
render_priority = 0
shader = ExtResource("7_cbaah")
shader_parameter/affine_mapping = false
shader_parameter/albedo = ExtResource("11_cbaah")
shader_parameter/alpha_scissor = 0.5
shader_parameter/jitter = 0.25
shader_parameter/resolution = Vector2i(320, 240)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_urkw7"]

[sub_resource type="ArrayMesh" id="ArrayMesh_fmpap"]
_surfaces = [{
"aabb": AABB(-0.5, -0.5, -0.5, 1, 1, 1),
"format": 34896613377,
"index_count": 36,
"index_data": PackedByteArray("AAABAAIAAAADAAEABAACAAEAAwAEAAEABQAAAAIAAwAAAAUABAAGAAIABQACAAYAAwAHAAQAAwAFAAcABwAGAAQABwAFAAYA"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 8,
"vertex_data": PackedByteArray("AAAAAP//AAAAAP//AAAAAAAA/////wAAAAAAAAAAAAD/////AAAAAP//AAD//wAA////////AAD//wAAAAAAAA==")
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_2q5fv"]
resource_name = "Church_Cube_001"
_surfaces = [{
"aabb": AABB(-0.5, -0.5, -0.5, 1, 1, 1),
"attribute_data": PackedByteArray("/1////+f/7//n////1//v/9f/7//n/9//5//v/9f/3//X/9//5//P/+f/3//X/8//1//P/+fAAD/n/8//18AAP8f/3//X/8//1//f/8f/z//n/9//9//P//f/3//n/8/"),
"format": 34896613399,
"index_count": 36,
"index_data": PackedByteArray("AAABAAIAAAADAAEABAAFAAYABAAHAAUACAAJAAoACAALAAkADAANAA4ADAAPAA0AEAARABIAEAATABEAFAAVABYAFAAXABUA"),
"material": SubResource("StandardMaterial3D_urkw7"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 24,
"vertex_data": PackedByteArray("AAAAAP//VNUAAP//AABU1QAA/////1TVAAAAAAAAVNUAAAAAAAD///////8AAP//AAD//wAA/////wAAAAD/////AAAAAFTV////////VNX/////AABU1f//AAD//1TV//8AAP///78AAP//////v/////////+/AAAAAP///78AAAAAAAD/v///AAD///+///8AAAAA/78AAAAA////v/////8AAP//AAD///////8AAP//AAD/////////////VNVU1VTVVNVU1VTVVNVU1f+//7//v/+//7//v/+//7+qKqoqqiqqKqoqqiqqKqoq/////////////////////wAA/38AAP9/AAD/fwAA/3//f/+//3//v/9//7//f/+/")
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_fmpap")

[node name="Room" type="Node3D"]
script = ExtResource("1_g2p7x")

[node name="Player" parent="." instance=ExtResource("1_ko3d7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.2845087, 0)

[node name="Floor" type="StaticBody3D" parent="."]
transform = Transform3D(20, 0, 0, 0, 20, 0, 0, 0, 20, 0, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0049303537, 0)
mesh = SubResource("PlaneMesh_ko3d7")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.04939586, 0)
shape = SubResource("BoxShape3D_g2p7x")

[node name="Interaction_area" parent="." instance=ExtResource("3_dutty")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 10.488962, 0, -10)
interactions = Array[PackedScene]([ExtResource("4_u4kg2"), ExtResource("5_cmu4p")])

[node name="Interaction_area2" parent="." instance=ExtResource("3_dutty")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, -9.109861, 0, 13)
interactions = Array[PackedScene]([ExtResource("4_u4kg2"), ExtResource("5_cmu4p")])

[node name="Chest_texture" type="MeshInstance3D" parent="."]
transform = Transform3D(2.453839, 0, 0, 0, 2.453839, 0, 0, 0, 2.453839, -3.583733, 1.0190465, 1.5952482)
material_override = SubResource("ShaderMaterial_pwss2")
mesh = SubResource("BoxMesh_u4kg2")

[node name="Chest" parent="." instance=ExtResource("7_2ayg0")]
transform = Transform3D(0.52974164, 0, 0.84815913, 0, 1, 0, -0.84815913, 0, 0.52974164, -3.2524476, 0.012082756, 5.7878647)

[node name="Enemy_test" type="Sprite3D" parent="."]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, 0.08023277, 0.63572454, 0.05548954)
material_override = SubResource("ShaderMaterial_ce7yl")
texture_filter = 2
texture = ExtResource("9_4v86v")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.7071068, 0.7071068, 0, -0.7071068, -0.7071068, 0, 9, -0.5767875)
visible = false

[node name="Church" type="Node3D" parent="."]

[node name="Light" type="OmniLight3D" parent="Church"]
transform = Transform3D(-0.29086468, -0.77110094, 0.56639314, -0.055189036, 0.6045247, 0.79467237, -0.9551711, 0.19988343, -0.2183912, 4.0762453, 5.903862, 0.5622468)
light_energy = 79.57747
omni_range = 4096.0
omni_attenuation = 2.0

[node name="Plane" type="MeshInstance3D" parent="Church"]
mesh = SubResource("ArrayMesh_htoua")
skeleton = NodePath("")
surface_material_override/0 = SubResource("ShaderMaterial_cbaah")

[node name="Cube" type="MeshInstance3D" parent="Church"]
transform = Transform3D(1, 0, 0, 0, 2, 0, 0, 0, 1, 0, 1, 0)
mesh = SubResource("ArrayMesh_2q5fv")
skeleton = NodePath("")
